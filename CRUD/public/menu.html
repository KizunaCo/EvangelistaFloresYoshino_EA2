<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cafetano | Menu</title>
  <style>
    body {
      background-color: #fdf6f0;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 1rem;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }
    h1 {
      color: #3e2723;
      font-size: 1.8rem;
    }
    .cart-icon {
      text-decoration: none;
      background-color: #3e2723;
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 10px;
      font-size: 1rem;
    }
    .tabs {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    .tab-button {
      padding: 0.6rem 1.2rem;
      background-color: #fff;
      border: 1px solid #d7ccc8;
      border-radius: 10px;
      cursor: pointer;
      color: #3e2723;
      font-weight: 600;
      transition: 0.3s;
    }
    .tab-button.active,
    .tab-button:hover {
      background-color: #3e2723;
      color: white;
    }
    .menu-section {
      display: none;
    }
    .menu-section.active {
      display: block;
    }
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1.5rem;
    }
    .menu-card {
      background: white;
      border-radius: 15px;
      padding: 1rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .menu-card img {
      width: 100%;
      height: 130px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 0.8rem;
    }
    .menu-card h3 {
      color: #3e2723;
      margin: 0.5rem 0 0.3rem;
    }
    .menu-card p {
      font-size: 0.9rem;
      color: #555;
      flex-grow: 1;
    }
    .size-select {
      margin: 0.8rem 0;
    }
    .hotcold-select {
      margin-bottom: 0.7rem;
    }
    select {
      padding: 0.3rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 100%;
      font-size: 0.9rem;
    }
    button {
      background-color: #3e2723;
      color: white;
      border: none;
      padding: 0.6rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #5d4037;
    }
    .price-label {
      margin: 0.5rem 0 0.8rem 0;
      font-weight: 600;
      color: #3e2723;
      font-size: 1.05rem;
    }
  </style>
</head>
<body>

<header>
  <h1>Cafetano Menu</h1>
  <div id="header-actions">
    <a class="cart-icon" href="cart.html">ðŸ›’ Cart</a>
    <span id="user-greeting" style="margin-left: 0.7rem;"></span>
  </div>
</header>

<div class="tabs">
  <button class="tab-button active" data-tab="coffee" onclick="showTab('coffee')">Coffee</button>
  <button class="tab-button" data-tab="noncoffee" onclick="showTab('noncoffee')">Non-Coffee Drinks</button>
  <button class="tab-button" data-tab="colddrinks" onclick="showTab('colddrinks')">Cold Drinks</button>
  <button class="tab-button" data-tab="pastries" onclick="showTab('pastries')">Pastries</button>
  <button class="tab-button" data-tab="meals" onclick="showTab('meals')">Meals</button>
</div>

<section id="coffee" class="menu-section active">
  <div class="menu-grid">
    <div class="menu-card">
      <img src="https://i.imgur.com/WpL1IuB.jpg" alt="Espresso" />
      <h3>Espresso</h3>
      <p>Strong and bold, classic espresso shot.</p>
      <div class="hotcold-select">
        <label><input type="radio" name="hotcold-espresso" value="Hot" checked> Hot</label>
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-espresso" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Single">Single - â‚±120</option>
          <option value="Double">Double - â‚±140</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card">
      <img src="https://i.imgur.com/fbFZTuk.jpg" alt="Cappuccino" />
      <h3>Cappuccino</h3>
      <p>Creamy and frothy with steamed milk foam.</p>
      <div class="hotcold-select">
        <label><input type="radio" name="hotcold-cappuccino" value="Hot" checked> Hot</label>
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-cappuccino" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Medium">Medium - â‚±150</option>
          <option value="Large">Large - â‚±170</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card">
      <img src="https://i.imgur.com/GIVM2fB.jpg" alt="Spanish Latte" />
      <h3>Spanish Latte</h3>
      <p>Sweetened latte with creamy condensed milk.</p>
      <div class="hotcold-select">
        <label><input type="radio" name="hotcold-spanishlatte" value="Hot" checked> Hot</label>
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-spanishlatte" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Medium">Medium - â‚±160</option>
          <option value="Large">Large - â‚±180</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card">
      <img src="https://i.imgur.com/OJfAwQk.jpg" alt="Mocha" />
      <h3>Mocha</h3>
      <p>Chocolate-flavored coffee with whipped cream.</p>
      <div class="hotcold-select">
        <label><input type="radio" name="hotcold-mocha" value="Hot" checked> Hot</label>
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-mocha" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Medium">Medium - â‚±165</option>
          <option value="Large">Large - â‚±185</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
  </div>
</section>

<section id="noncoffee" class="menu-section">
  <div class="menu-grid">
    <div class="menu-card">
      <img src="https://i.imgur.com/WIpiNJe.jpg" alt="Matcha Latte" />
      <h3>Matcha Latte</h3>
      <p>Earthy green tea with steamed milk.</p>
      <div class="hotcold-select">
        <label><input type="radio" name="hotcold-matcha" value="Hot" checked> Hot</label>
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-matcha" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Medium">Medium - â‚±160</option>
          <option value="Large">Large - â‚±180</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card">
      <img src="https://i.imgur.com/bOMbbQH.jpg" alt="Classic Chocolate" />
      <h3>Classic Chocolate</h3>
      <p>Rich cocoa drink topped with marshmallows.</p>
      <div class="hotcold-select">
        <label><input type="radio" name="hotcold-chocolate" value="Hot" checked> Hot</label>
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-chocolate" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Medium">Medium - â‚±140</option>
          <option value="Large">Large - â‚±160</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card">
      <img src="https://i.imgur.com/A0TrkxS.jpg" alt="Chai Latte" />
      <h3>Chai Latte</h3>
      <p>Spiced tea blend with steamed milk.</p>
      <div class="hotcold-select">
        <label><input type="radio" name="hotcold-chai" value="Hot" checked> Hot</label>
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-chai" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Medium">Medium - â‚±150</option>
          <option value="Large">Large - â‚±170</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
  </div>
</section>

<section id="colddrinks" class="menu-section">
  <div class="menu-grid">
    <div class="menu-card">
      <img src="https://i.imgur.com/UbgYgGg.jpg" alt="Iced Latte" />
      <h3>Iced Latte</h3>
      <p>Chilled espresso and milk over ice.</p>
      <div class="hotcold-select">

       <label style="margin-left:1rem;"><input type="radio" name="hotcold-lemontea" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Medium">Medium - â‚±150</option>
          <option value="Large">Large - â‚±170</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card">
      <img src="https://i.imgur.com/wVKtxjd.jpg" alt="Lemon Iced Tea" />
      <h3>Lemon Iced Tea</h3>
      <p>Refreshing citrus-flavored iced tea.</p>
      <div class="hotcold-select">
    
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-lemontea" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Regular">Regular - â‚±90</option>
          <option value="Large">Large - â‚±110</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card">
      <img src="https://i.imgur.com/WOrEXDf.jpg" alt="Cookies & Cream Frappe" />
      <h3>Cookies & Cream Frappe</h3>
      <p>Cold and creamy with cookie bits.</p>
      <div class="hotcold-select">
        <label style="margin-left:1rem;"><input type="radio" name="hotcold-lemontea" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Medium">Medium - â‚±170</option>
          <option value="Large">Large - â‚±190</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card">
      <img src="https://i.imgur.com/7H9Es6e.jpg" alt="Strawberry Milk" />
      <h3>Strawberry Milk</h3>
      <p>Sweet and fruity cold milk drink.</p>
      <div class="hotcold-select">
      
       <label style="margin-left:1rem;"><input type="radio" name="hotcold-lemontea" value="Cold"> Cold</label>
      </div>
      <div class="size-select">
        <select class="size-select">
          <option value="Regular">Regular - â‚±130</option>
          <option value="Large">Large - â‚±150</option>
        </select>
      </div>
      <button>Add to Cart</button>
    </div>
  </div>
</section>

<!-- Pastries and Meals remain unchanged -->

<section id="pastries" class="menu-section">
  <div class="menu-grid">
    <div class="menu-card" data-price="70">
      <img src="https://i.imgur.com/Sf6vhhB.jpg" alt="Butter Croissant" />
      <h3>Butter Croissant</h3>
      <p>Light, flaky, and buttery classic.</p>
      <div class="price-label">â‚±70</div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card" data-price="90">
      <img src="https://i.imgur.com/GZJhf5D.jpg" alt="Mini Cheesecake" />
      <h3>Mini Cheesecake</h3>
      <p>Creamy and rich dessert slice.</p>
      <div class="price-label">â‚±90</div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card" data-price="60">
      <img src="https://i.imgur.com/ICLMNqT.jpg" alt="Banana Bread" />
      <h3>Banana Bread</h3>
      <p>Moist and homemade taste.</p>
      <div class="price-label">â‚±60</div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card" data-price="85">
      <img src="https://i.imgur.com/bkaLW5E.jpg" alt="Chocolate Cake" />
      <h3>Chocolate Cake</h3>
      <p>Rich and decadent slice.</p>
      <div class="price-label">â‚±85</div>
      <button>Add to Cart</button>
    </div>
  </div>
</section>

<section id="meals" class="menu-section">
  <div class="menu-grid">
    <div class="menu-card" data-price="120">
      <img src="https://i.imgur.com/ynme4tP.jpg" alt="Bacon & Egg Sandwich" />
      <h3>Bacon & Egg Sandwich</h3>
      <p>Toasted sandwich with crispy bacon and egg.</p>
      <div class="price-label">â‚±120</div>
      <button>Add to Cart</button>
    </div>
    <div class="menu-card" data-price="140">
      <img src="https://i.imgur.com/wHFhPQU.jpg" alt="Garlic Tuna Pasta" />
      <h3>Garlic Tuna Pasta</h3>
      <p>Light pasta tossed in garlic oil with tuna.</p>
      <div class="price-label">â‚±140</div>
      <button>Add to Cart</button>
    </div>
  </div>
</section>

<script>
  const tabs = document.querySelectorAll('.tab-button');
  const sections = document.querySelectorAll('.menu-section');

  function showTab(tabName) {
    sections.forEach(section => {
      section.classList.toggle('active', section.id === tabName);
    });
    tabs.forEach(tab => {
      tab.classList.toggle('active', tab.dataset.tab === tabName);
    });
  }
  // Utility function to get cart from localStorage or empty array
  function getCart() {
    return JSON.parse(localStorage.getItem('cafetanoCart')) || [];
  }

  // Utility function to save cart to localStorage
  function saveCart(cart) {
    localStorage.setItem('cafetanoCart', JSON.stringify(cart));
  }

  // When user clicks Add to Cart button
  function addToCart(button) {
    const card = button.closest('.menu-card');
    const name = card.querySelector('h3').textContent.trim();
    const sizeSelect = card.querySelector('select.size-select');
    // Get hot/cold option if present
    let hotcold = null;
    const hotcoldRadio = card.querySelector('.hotcold-select input[type="radio"]:checked');
    if (hotcoldRadio) {
      hotcold = hotcoldRadio.value;
    }
    let size, price;
    if (sizeSelect) {
      size = sizeSelect.options[sizeSelect.selectedIndex].value;
      price = parseFloat(sizeSelect.options[sizeSelect.selectedIndex].text.match(/â‚±(\d+)/)[1]);
    } else {
      size = 'Regular';
      price = parseFloat(card.dataset.price) || 0;
    }

    // Define availableSizes for the item by reading all options
    let availableSizes = [];
    if (sizeSelect) {
      for (let option of sizeSelect.options) {
        const s = option.value;
        const p = parseFloat(option.text.match(/â‚±(\d+)/)[1]);
        availableSizes.push({ size: s, price: p });
      }
    } else {
      availableSizes = [{ size: size, price: price }];
    }

    let cart = getCart();

    // Check if item with same name, size, and hot/cold already exists in cart
    const existingIndex = cart.findIndex(item =>
      item.name === name &&
      item.size === size &&
      (item.hotcold === hotcold || (!item.hotcold && !hotcold))
    );

    if (existingIndex !== -1) {
      // Increase quantity
      cart[existingIndex].quantity += 1;
    } else {
      // Add new item
      cart.push({
        name,
        hotcold,
        size,
        price,
        quantity: 1,
        availableSizes
      });
    }

    saveCart(cart);

    alert(`${hotcold ? hotcold + ' ' : ''}${name} (${size}) added to cart!`);
  }

  // Attach event listeners to all Add to Cart buttons
  document.querySelectorAll('button').forEach(button => {
    if (button.textContent.trim() === 'Add to Cart') {
      button.addEventListener('click', () => addToCart(button));
    }
  });

  
  // User greeting/login logic
  function updateUserGreeting() {
    const userGreeting = document.getElementById('user-greeting');
    let loggedIn = null;
    try {
      loggedIn = JSON.parse(localStorage.getItem('cafetanoLoggedIn'));
    } catch {}
    if (loggedIn && loggedIn.fullname) {
      userGreeting.innerHTML = `
        ðŸ‘¤ ${loggedIn.fullname}
        <a href="#" id="logout-link" style="margin-left:1rem;color:#b71c1c;text-decoration:underline;cursor:pointer;">Logout</a>
      `;
      document.getElementById('logout-link').onclick = function() {
        localStorage.removeItem('cafetanoLoggedIn');
        window.location.reload();
      };
    } else {
      userGreeting.innerHTML = `<a class="cart-icon" href="login.html">Login</a>`;
    }
  }

  updateUserGreeting();

</script>

</body>
</html>